<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Clase 3</title>
    <meta charset="utf-8" />
    <meta name="author" content="Miriam Lerma" />
    <script src="Clase2_files/header-attrs-2.6/header-attrs.js"></script>
    <link href="Clase2_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <meta name="github-repo" content="MiriamLL/Curso_CIAD"/>
    <meta name="twitter:title" content="Cargar datps"/>
    <meta name="twitter:description" content="Introduccion a RStudioCurso de R"/>
    <meta name="twitter:url" content="https://github.com/MiriamLL/Curso_CIAD/blob/main/Clase2.html"/>
    <meta name="twitter:image:src" content="https://images.unsplash.com/photo-1525909002-1b05e0c869d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=675&amp;q=80"/>
    <meta name="twitter:image:alt" content="Introduccion a R y RStudioCurso de R"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@MiriamLL"/>
    <meta name="twitter:site" content="@MiriamLL"/>
    <meta property="og:title" content="Cargar datps"/>
    <meta property="og:description" content="Introduccion a RStudioCurso de R"/>
    <meta property="og:url" content="https://github.com/MiriamLL/Curso_CIAD/blob/main/Clase2.html"/>
    <meta property="og:image" content="https://images.unsplash.com/photo-1525909002-1b05e0c869d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=675&amp;q=80"/>
    <meta property="og:image:alt" content="Introduccion a R y RStudioCurso de R"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Miriam Lerma"/>
  </head>
  <body>
    <textarea id="source">






class: title-slide, middle, right
background-image: url(https://images.unsplash.com/photo-1525909002-1b05e0c869d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=675&amp;q=80)
background-size: cover

### Clase 3
# Gr√°ficos

**Miriam Lerma**&lt;br&gt;
Febrero 2021

---
# 1. Intro

- Porque hacer gr√°ficos, que es ggplot y conceptos b√°sicos para crear gr√°ficos.  
- Van a abrir R, crear un gr√°fico b√°sico y no guarden su script o no cierren R.  

- Como cambiar la est√©tica de mis gr√°ficos.    
- Van a cambiar la est√©tica de su gr√°fico.  

Un poco de inspiraci√≥n y la infinidad de opciones de gr√°ficos.

---

## Ustedes

- Conocimientos b√°sicos de R (saben abrirlo, cargar paquetes y datos).  

- Quieren hacer gr√°ficos con sus datos usando R.  


### Objetivo de hoy

- Crear sus primeros gr√°ficos.  

---

# Cr√©ditos

-Todo el material basado en el libro:  
[R4DS, editado por Riva Quiroga](https://r4ds-en-espaniol.netlify.app/)  

-Y el libro de:  
[Bookdown, por Sonia Mendizabal](https://songeo.github.io/introduccion-r-bookdown/)

-Y materiales de RLadies   
[Zero to Hero](https://github.com/rladies/meetup-presentations_freiburg)  
[Recursos en espanol ](https://github.com/rladies/recursos_en_espanol)  
[RdesdeCero por Yanina Bellini](https://github.com/rladies/meetup-presentations_santarosa/blob/master/RdesdeCero)  

-En ingles:  
[IntroduccionToGGplot](https://englelab.gatech.edu/useRguide/introduction-to-ggplot2.html)  
[gg is for Grammar of Graphics](https://pkg.garrickadenbuie.com/trug-ggplot2)

-Im√°genes adicionales  
[Unsplash](https://unsplash.com/)

---

# 1.1. Teor√≠a

El objetivo de un gr√°fico es comunicar. En ciencia, la idea es brindar informaci√≥n de manera sencilla y f√°cil de entender.

&lt;img src="http://www.typesofgraphs.com/wp-content/uploads/2015/12/Typesofgraphs.png" height="350" /&gt;
  
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

# 1.1. Teor√≠a

Graficar es transformar datos a visualizaciones que varian en tama√±o, forma y colores.  

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_1.jpg" height="350" /&gt;
  
.right[
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)
]

---

# 1.1. Teor√≠a

Hay muchas maneras de graficar datos, pero hay diferentes maneras de percibirlos.  

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_2.jpg" height="350" /&gt;
  
.right[
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)
]

---

# 1.1. Teor√≠a

Cual es m√°s intuitiva?

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_4.jpg" height="350" /&gt;

.right[
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)
]

---

# 1.1. Teor√≠a

Cual debo de usar?

Experimentar diferentes gr√°ficas y elegir la que cuente mejor la historia. 

**Tableau Public** cre√≥ esta tabla que te da sugerencias de acuerdo a tu tipo de datos que visualizaci√≥n deber√≠as usar. 

&lt;img src="https://paldhous.github.io/ucb/2016/dataviz/img/class2_5.jpg" height="300" /&gt;

---

# 1.2. Intro a ggplot

Hay muchos paquetes para hacer gr√°ficos ademas de **ggplot2**. 
- Usaremos **ggplot2** ya que es uno de los mas vers√°tiles  

--
... y del que encuentras m√°s ayuda e inspiraci√≥n.

---

# 1.2. Como funciona?

Para objetivos pr√°cticos, un gr√°fico se puede dividir en tres componentes esenciales:  
- **Datos** (data): conjunto de datos compuesto por variables que mapeamos.  
- **Est√©tica** (aes): atributos est√©ticos del objeto geom√©trico, posici√≥n color, forma, tama√±o.
- **Geometr√≠a** (geom): objeto geom√©trico en cuesti√≥n. Puntos, lineas, barras?  

El paquete **ggplot** funciona por **capas**, si han usado SIG (sistema de informaci√≥n geogr√°fica) estar√°n mas familiarizados.

&lt;img src="https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png" height="200" /&gt;
  
.right[
Fuente: [ggplot2 book](https://englelab.gatech.edu/useRguide/working-with-data-overview.html)
]


---

# 1.3. Instalar y cargar


```r
install.packages("ggplot2")
```

Otros paquetes que nos ser√°n √∫tiles hoy:

```r
library(datos)
library(tidyverse)
library(ggplot2)
```

---

# 1.3. Instalar y cargar

Cargar datos de prueba

```r
Prueba&lt;-datos::clima
```

---

# 1.3. Agregar datos


```r
ggplot(data=Prueba)
```

--



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-11-1.png" height="300" /&gt;

---

# 1.3. Agregar ejes


```r
ggplot(data=Prueba,mapping=aes(x=humedad,y=visibilidad))
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-13-1.png" height="300" /&gt;

Noten que sus ejes tienen que ser columnas en su tabla.
---

# 1.3. Agregar geometr√≠a


```r
ggplot(data=Prueba, 
       mapping=aes(x=humedad,y=visibilidad))+
*      geom_point()
```
  


&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-15-1.png" height="300" /&gt;

Nota: te salio un warning?
Que dice el warning?
Te avisa que hab√≠a NAs y que no se incluyeron en el gr√°fico.

---
# 1.4. Tipos de gr√°ficos

.center[
Hoy veremos:  
-Puntos  
-Lineas  
-Barras  
-Boxplots  
-Trayectorias  
-Mapas  
... pero hay muchos mas.

&lt;img src="http://www.typesofgraphs.com/wp-content/uploads/2015/12/Typesofgraphs.png" height="300" /&gt;
]

---

# 1.4. Gr√°fico de puntos

Datos inventados de camarones, tama√±o y densidad del cultivo.

```r
Especies&lt;-c('Lito','Lito','Lito','Lito','Lito')
Camarones&lt;-as.data.frame(Especies)
Camarones$Tamanio&lt;-c(1.5,1.6,1.8,1.9,2.1)
Camarones$Densidad&lt;-c(100,200,300,400,500)
```

---

# 1.4. Gr√°fico de puntos

Gr√°fico de datos inventados de camarones, tama√±o y densidad del cultivo.

```r
ggplot(data=Camarones,mapping=aes(x=Tamanio, y=Densidad))+
* geom_point()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-19-1.png" height="300" /&gt;

---

# 1.4. Gr√°fico de lineas

Datos inventados de tipo de algas, en meses (tiempo) y densidad (cantidad)

```r
Algas&lt;-c('B','E','B','B','B','B','E','B','E','B')
MareaRoja&lt;-as.data.frame(Algas)
MareaRoja$Tiempo&lt;-c(1,2,3,4,5,6,7,8,9,10)
MareaRoja$Cantidad&lt;-c(100,200,300,200,200,300,400,500,700,200)
```

---

# 1.4. Gr√°fico de lineas

Gr√°fico de datos inventados de tipo de bacterias, meses (tiempo) y densidad (cantidad)

```r
ggplot(data=MareaRoja,mapping=aes(x=Tiempo, y=Cantidad))+
* geom_line()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-22-1.png" height="300" /&gt;

---

# 1.4. Gr√°fico de barras

Datos Inventados de microbiota vaginal en mujeres de diferente edad, y densidad (cantidad)

```r
Microbiota&lt;-c('B','E','B','B','B','B','E','B','E','B')
Microbiota&lt;-as.data.frame(Microbiota)
Microbiota$Edad&lt;-c(20,25,30,35,40,45,50,55,60,65)
Microbiota$Cantidad&lt;-c(100,200,300,200,200,300,400,500,700,200)
```

---

# 1.4. Gr√°fico de barras

Gr√°fico de datos inventados

```r
ggplot(data=Microbiota,mapping=aes(x=Edad, y=Cantidad))+
* geom_bar()
```
Error: stat_count() can only have an x or y aesthetic.
Hay que agregar un argumento porque no sabe que quieres en las barras.

---


# 1.4. Gr√°fico de barras

Gr√°fico de datos inventados de microbiota por edad y cantidades

```r
ggplot(data=Microbiota,mapping=aes(x=Edad, y=Cantidad))+
* geom_bar(stat='identity')
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-26-1.png" height="300" /&gt;


---

# 1.4. Boxplot

Datos inventados de salinidad en Bah√≠a de Santa Mar√≠a diferencias en las estaciones muestreadas

```r
Salinidad&lt;-c(38,39,38,37,36,40,38,36,35,38)
Mes&lt;-c(1,2,3,4,5,6,7,8,9,10)
Estacion&lt;-c(1,1,1,1,1,2,2,2,2,2)
BSM&lt;-as.data.frame(Salinidad)
BSM$Mes&lt;-Mes
BSM$Estacion&lt;-as.factor(Estacion)
```

---

# 1.4. Boxplot

Gr√°fico de datos inventados de salinidad en Bah√≠a de Santa Mar√≠a diferencias en las estaciones muestreadas.

```r
ggplot(data = BSM, aes(x=Estacion, y = Salinidad, group=Estacion)) +
* geom_boxplot()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-29-1.png" height="300" /&gt;


---

# 1.4. Trayectorias

Datos inventados de un bobo caf√© que tenemos datos de latitud y longitud.

```r
Latitud&lt;-c(8,9,10,9,8,6,5,9,8,7,6,5) #eje x
Longitud&lt;-c(5,6,7,6,5,4,3,4,5,6,7,5) #eje y
Bobos&lt;-as.data.frame(Longitud)
Bobos$Latitud&lt;-Latitud
```

---

# 1.4. Trayectorias

Gr√°ficos de datos inventados de un bobo caf√© que tenemos datos de latitud y longitud.

```r
ggplot(data = Bobos, aes(x = Latitud, y = Longitud)) +
* geom_path()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-31-1.png" height="300" /&gt;

---

# 1.4. Mapas


```r
library(rnaturalearth)
library(rnaturalearthdata)
```


```r
world &lt;- ne_countries(scale = "medium", returnclass = "sf") # en clase sf
```

---

# 1.4. Mapas

Coordenadas de Sinaloa approx. 20 grados Norte, 110 grados Oeste (Noroeste)

```r
ggplot()+
*   geom_sf(data = world) +
*   coord_sf(xlim = c(-110, -105), ylim = c(20, 25), expand = FALSE)
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-36-1.png" height="300" /&gt;

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1559311648-addd6af95dd4?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80)
background-size: cover

# Su turno!

---


# 1.5. Ejercicios




Crea un gr√°fico de puntos con los datos de Ping√ºinos üêß

- Carga los datos

```r
library(datos)
Pingus&lt;-datos::pinguinos
```

- Rellena los espacios (*****) para crear un gr√°fico de puntos el largo del pico y el largo de la aleta.

```r
#ggplot(data=***, mapping=aes(x=***,y=***))+
#  geom_***()
```

---

# 1.5. Ejercicios

## Respuesta

```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm))+
  geom_point()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-41-1.png" height="300" /&gt;

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1525909002-1b05e0c869d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=675&amp;q=80)
background-size:cover

# 2. Est√©ticas

---

#2.1. Est√©ticas 
### Colores de los s√≠mbolos


```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, 
*                               color=especie))+
  geom_point()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-43-1.png" height="300" /&gt;

---

#2.1. Est√©ticas 
### Temas


```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
* theme_bw()
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-50-1.png" height="300" /&gt;

---

#2.1. Est√©ticas 
###  Fondos


```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
* theme(panel.background = element_rect(fill = 'darkblue'))
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-47-1.png" height="300" /&gt;

---

#2.1. Est√©ticas 
### Modificar ejes


```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
* xlab('Largo Pico')+ylab('Largo Aleta')
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-50-1.png" height="300" /&gt;


---

#2.1. Est√©ticas 
### Tama√±o de letras


```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
* theme(axis.title = element_text(size=20))
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-52-1.png" height="300" /&gt;

---

#2.1. Est√©ticas 
### Leyendas


```r
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
* theme(legend.position = "top")
```



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-54-1.png" height="300" /&gt;

---

# 3.1 Ayuda
## Cheat sheet

Help&gt;CheatSheets&gt;Data Visualization with ggplot

---

# 3.2. Errores comunes
### Orden

No tener los datos ordenados.  
Noten que para definir los ejes usamos columnas, por lo tanto es importante que tengan sus datos ordenados de esta manera.  
Si no los tienen asi por ahora, lo veremos mas adelante en 'ordenar mis datos'.  

&lt;img src="https://r4ds-en-espaniol.netlify.app/diagrams_w_text_as_path/es/visualization-stat-bar.svg" width="600" /&gt;
  
De libro [R4DS](https://r4ds-en-espaniol.netlify.app/) 

---

# 3.2. Errores comunes
### Sintaxis

No poner el **+**

```r
#ggplot(data=Pingus, 
#       mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))
#       geom_point()
```

--

Poner el **+** en el lugar incorrecto

```r
#ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))
# +geom_point()
```

--

No cerrar par√©ntesis


```r
#ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie)+
# geom_point()
```
Falta un parentesis despues de especie.

---

# 3.3. Ejercicios

Pero primero sepan que pueden guardar su gr√°fico como objeto y agregar est√©ticas a su gr√°fico base con el signo de +

```r
MiGrafico&lt;-ggplot(data=Pingus, 
                  mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, 
                              color=especie))+
  geom_point()
```


```r
*MiGrafico+
  theme_bw()+
  theme(legend.position = "top")
```


---

# 3.3. Ejercicios

Tambi√©n sepan que no necesitan escribir todo (data, mapping se puede omitir) si siguen un orden.

```r
MiGrafico&lt;-ggplot(Pingus, aes(x=largo_pico_mm,y=largo_aleta_mm, 
                              color=especie))+
  geom_point()
MiGrafico
```

![](Clase2_files/figure-html/unnamed-chunk-78-1.png)&lt;!-- --&gt;

---

class: title-slide, bottom
background-image: url(https://images.unsplash.com/photo-1559311648-addd6af95dd4?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80)
background-size: cover

### Su turno

a) Intenten crear un gr√°fico solos y los asistir√© si tienen dudas  

b) Les dar√© instrucciones

---

### Su turno

Creen un gr√°fico de puntos con los datos de diamantes

```r
Diamantes&lt;-datos::diamantes
```

Grafiquen el *precio* por el *quilate* y cambien el color de lo puntos de acuerdo al *corte* y cambien el nombre en el eje x por *Precio en dolares* y el eje y por *kt*.

```r
#ggplot(data=***,mapping=aes(x=***, y=***, color=****))+
#  geom_****()+
#  theme_bw()+
#  xlab("**")+ylab("***")
```

---

### Su turno

C√≥digo  

```r
ggplot(data=Diamantes,mapping=aes(x=precio, y=quilate, color=corte))+
  geom_point()+
  theme_bw()+
  xlab("Precio en pesos")+ylab("kt")
```

Gr√°fico  


&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-66-1.png" height="350" /&gt;

---

# 4. Otras posibilidades

---
# 4.1. Animaciones

Los gr√°ficos se pueden animar.


```r
library(gganimate)
library(plotly)
```

&lt;img src="https://www.datanovia.com/en/wp-content/uploads/dn-tutorials/r-tutorial/images/transition_time.gif" height="350" /&gt;

---

# 4.2. Inspiraci√≥n

- [Visualizaciones en R](https://www.notion.so/Data-Viz-Bookmarks-dc01718020bd4fd6a8a4ca80e6bce933) by Silvia Canel√≥n (@spcanelon) and Tom Mock (@thomas_mock)  

- Twitter: #tidytuesday #DatosDeMiercoles, #30d√≠asdegr√°ficos

- [RGraphGallery](https://www.r-graph-gallery.com/)

- [DataToViz](https://www.data-to-viz.com/)

- [Colores](https://coolors.co/)

---

class: title-slide, middle, bottom
background-image: url(https://images.unsplash.com/photo-1525909002-1b05e0c869d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=675&amp;q=80)
background-size: cover

# Recapitulando

Esta clase:  
-3.1 Visualizacion de datos  
-3.2 Usar ggplot2  

Siguiente clase:  
-4.1 Realizar operaciones en R  
-4.2 Inspeccionar y manipular dataframes  

---

# 5. Materiales extra
Estos materiales son especificos para los objetivos de alumnos del curso de CIAD.

---

### 5.1. Mapa y Scatterpie
Mapa con puntos en diferentes tamanios.

Ejemplo de: [mapa con scatterpies](https://cran.r-project.org/web/packages/scatterpie/vignettes/scatterpie.html)

1- Crear datos

```r
set.seed(123)
long &lt;- rnorm(50, sd=100)
lat &lt;- rnorm(50, sd=50)
d &lt;- data.frame(long=long, lat=lat)
d &lt;- with(d, d[abs(long) &lt; 150 &amp; abs(lat) &lt; 70,])
n &lt;- nrow(d)
d$region &lt;- factor(1:n)
d$A &lt;- abs(rnorm(n, sd=1))
d$B &lt;- abs(rnorm(n, sd=2))
d$C &lt;- abs(rnorm(n, sd=3))
d$D &lt;- abs(rnorm(n, sd=4))
d[1, 4:7] &lt;- d[1, 4:7] * 3
head(d)
```

```
##          long        lat region          A        B        C        D
## 1  -56.047565  12.665926      1 2.13121969 8.663359 3.928711 8.676792
## 2  -23.017749  -1.427338      2 0.25688371 1.403569 1.375096 4.945092
## 4    7.050839  68.430114      3 0.24669188 0.524395 3.189978 5.138863
## 5   12.928774 -11.288549      4 0.34754260 3.144288 3.789556 2.295894
## 8 -126.506123  29.230687      5 0.95161857 3.029335 1.048951 2.471943
## 9  -68.685285   6.192712      6 0.04502772 3.203072 2.596539 4.439393
```
No se asusten pero lo anterior es solo para que tengan un dataframe que tenga las mismas caracteristicas.

---

### 5.1. Mapa y Scatterpie

Si no tienen estos paquetes hay que instalarlos.

```r
library(ggplot2)
library(scatterpie)
```

---

### 5.1. Mapa y Scatterpie

Mapa con puntos en diferentes tama√±os.

2- Grafiquen los 'scatterpie'

```r
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region), data=d,
cols=LETTERS[1:4]) + coord_equal()
```

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-88-1.png" height="350" /&gt;

---

### 5.1. Mapa y Scatterpie

Mapa con puntos en diferentes tamanios.

3- Modificar el tamanio de los 'pies'

```r
d$radius &lt;- 6 * abs(rnorm(n))
p &lt;- ggplot() + geom_scatterpie(aes(x=long, y=lat, 
                                    group=region, r=radius), 
                                data=d,cols=LETTERS[1:4], color=NA) +
  coord_equal()
```


---

### 5.1. Mapa y Scatterpie
Mapa con puntos en diferentes tamanios.

4- Esto agrega como una leyenda como referencia del tamanio del pie.

```r
p + geom_scatterpie_legend(d$radius, x=-140, y=-70)
```

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-90-1.png" height="350" /&gt;


---

### 5.1. Mapa y Scatterpie
Mapa con puntos en diferentes tamanios.

5- Agregar el mapa de fondo

```r
world &lt;- map_data('world')
p &lt;- ggplot(world, aes(long, lat)) +
    geom_map(map=world, aes(map_id=region), fill=NA, color="black") +
    coord_quickmap()
p + geom_scatterpie(aes(x=long, y=lat, group=region, r=radius),
                    data=d, cols=LETTERS[1:4], color=NA, alpha=.8) +
    geom_scatterpie_legend(d$radius, x=-160, y=-55)
```

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-91-1.png" height="350" /&gt;

---

### 5.1. Mapa y Scatterpie


Para leer m√°s:

[B√°sicos para mapas](https://www.r-spatial.org//r/2018/10/25/ggplot2-sf-2.html)

[Otro ejemplo de mapa con scatterpies](https://www.r-bloggers.com/2018/01/plot-pie-charts-of-racial-composition-in-largest-metro-areas-on-a-map-in-r/amp/)

---

### 5.2. Grafico de barras con desviacion estandar.

Creditos: [RGraphGallery](https://www.r-graph-gallery.com/4-barplot-with-error-bar.html)

1- Cargar paqueteria

```r
library(ggplot2)
```

2- Crear un data frame inventado.

```r
data &lt;- data.frame(
  name=letters[1:5],
  value=sample(seq(4,15),5),
  sd=c(1,0.2,3,2,4))
```

---

### 5.2. Grafico de barras con desviacion estandar.

3- Graficar

```r
ggplot(data) +
  geom_bar( aes(x=name, y=value), 
            stat="identity", 
            fill="skyblue", alpha=0.7) +
  geom_errorbar(aes(x=name, ymin=value-sd, ymax=value+sd), width=0.4, colour="orange", alpha=0.9, size=1.3)
```

&lt;img src="https://www.r-graph-gallery.com/4-barplot-with-error-bar_files/figure-html/thecode-1.png" height="250" /&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
